@using Htmx

<CascadingValue Name="Parent" Value="this">
@if (Context?.Request.IsHtmx() == true)
{
    for (int i = 0; i < Containers.Count; i++)
    {
        var container = Containers[i];

        // If this is the first element we will render it inline
        // Secondary elements will be swapped into place
        if (i == 0)
        {
            @container
        }
        else
        {
            <HtmxSwapView Id="@container.Id">@container</HtmxSwapView>
        }
    }
}
else
{
    @PageContent
}
</CascadingValue>

@code {
    [CascadingParameter]
    public HttpContext? Context { get; set; }

    protected List<HtmxContent> Containers { get; } = new();

    [Parameter]
    public RenderFragment PageContent { get; set; }
}
